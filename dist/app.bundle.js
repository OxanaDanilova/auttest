!function(e){var t={};function l(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=t,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(a,o,function(t){return e[t]}.bind(null,o));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";function a(e,t,l){l.beginPath(),l.fillRect(e,t,1,1),l.fill()}l.r(t);(()=>{let e,t,l,o;const s=document.getElementsByClassName("myCanvas")[0],n=s.getContext("2d");document.getElementsByClassName("clear")[0].addEventListener("click",()=>{n.clearRect(0,0,s.width,s.height),localStorage.setItem("canvas","")});const c=document.getElementsByClassName("paint-btn")[0],r=document.getElementsByClassName("pick-btn")[0],d=document.getElementsByClassName("pen-btn")[0];if(localStorage.getItem("mode")){if(t=localStorage.getItem("mode"),localStorage.getItem("selected")){const e=localStorage.getItem("selected");document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),document.getElementsByClassName(e)[0].parentElement.classList.toggle("clicked")}}else t="pen",d.classList.add("clicked");const i=e=>{let t=e.width,l=e.height;const a=t/l;a>1?(l=(t=s.width)/a,n.drawImage(e,0,(s.height-l)/2,s.width,l)):a<1?(t=a*(l=s.height),n.drawImage(e,(s.width-t)/2,0,t,s.height)):1===a&&n.drawImage(e,0,0,s.width,s.height)},m=()=>{if(localStorage.getItem("canvas")){const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",n.imageSmoothingEnabled=!1,t.onload=function(){i(t)},t.src=e}};m();const g=()=>{t="paint",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),c.parentElement.classList.add("clicked"),localStorage.setItem("mode","paint"),localStorage.setItem("selected","paint-btn")},u=e=>{t="colPicker",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),r.parentElement.classList.add("clicked"),e.stopPropagation(),localStorage.setItem("mode","colPicker"),localStorage.setItem("selected","pick-btn")},f=()=>{t="pen",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),d.parentElement.classList.add("clicked"),localStorage.setItem("mode","pen"),localStorage.setItem("selected","pen-btn")};r.addEventListener("click",u),d.addEventListener("click",f),c.addEventListener("click",g);const y=document.getElementsByClassName("cur-col-btn")[0];localStorage.getItem("currentColor")?(o=localStorage.getItem("currentColor"),y.style.backgroundColor=o):o=getComputedStyle(y).backgroundColor;const p=document.getElementsByClassName("prev-col-btn")[0];y.addEventListener("input",(function(){const e=o;o=this.value,y.style.backgroundColor=o,p.style.backgroundColor=e,l=e,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",l)})),localStorage.getItem("prevColor")?(l=localStorage.getItem("prevColor"),p.style.backgroundColor=l):l=getComputedStyle(p).backgroundColor;const h=e=>{if("colPicker"===t)return;const a=o;o=e,y.style.backgroundColor=o,l=a,p.style.backgroundColor=a,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",l)};document.getElementsByClassName("red-btn")[0].addEventListener("click",()=>{h("#ff0000")});document.getElementsByClassName("blue-btn")[0].addEventListener("click",()=>{h("#41b6f7")});const E=document.getElementsByClassName("matrix128")[0],C=document.getElementsByClassName("matrix256")[0],b=document.getElementsByClassName("matrix512")[0];if(localStorage.getItem("matrix"))switch(e=localStorage.getItem("matrix")){case"4":document.getElementsByClassName("selected")[0].classList.toggle("selected"),E.classList.add("selected"),s.height=128,s.width=128,m();break;case"2":document.getElementsByClassName("selected")[0].classList.toggle("selected"),C.classList.add("selected"),s.height=256,s.width=256,m();break;case"1":document.getElementsByClassName("selected")[0].classList.toggle("selected"),b.classList.add("selected"),s.height=512,s.width=512,m()}else e=1,b.classList.add("selected");const k=(e,t)=>{localStorage.setItem("matrix",e),document.getElementsByClassName("selected")[0].classList.toggle("selected"),t.classList.add("selected"),s.height=512/e,s.width=512/e,m()},v=t=>{t.target===E&&k(e=4,t.target),t.target===C&&k(e=2,t.target),t.target===b&&k(e=1,t.target)};E.addEventListener("click",v),C.addEventListener("click",v),b.addEventListener("click",v);const L=(e,t)=>{o=e,y.style.backgroundColor=o,p.style.backgroundColor=t,l=t,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",l)};document.addEventListener("click",e=>{if("colPicker"===t&&e.target!==s){const t=o,l=window.getComputedStyle(e.target);L(l.backgroundColor,t)}});let I,S,B,w,N=!1;s.addEventListener("mousedown",()=>{n.fillStyle=o,"paint"===t&&(N=!0,n.fillRect(0,0,s.width,s.height)),"pen"===t&&(N=!0,I=void 0,S=void 0)}),s.addEventListener("mouseup",(function(){"pen"===t&&(N=!1,I=void 0,B=void 0,S=void 0,w=void 0,localStorage.setItem("canvas",s.toDataURL()))})),s.addEventListener("mousemove",l=>{"pen"===t&&!0===N&&(B=Math.ceil((l.pageX-s.offsetLeft)/e),w=Math.ceil((l.pageY-s.offsetTop)/e),a(B,w,n),I&&S&&function(e,t,l,o,s){if(e===t&&l===o)return;const n=Math.abs(t-e),c=Math.abs(o-l);let r=0,d=c,i=l,m=o-l;if(m>0&&(m=1),m<0&&(m=-1),n>=c)if(e<t)for(let l=e;l<=t;l+=1)a(l,i,s),2*(r+=d)>=n&&(i+=m,r-=n);else if(e>t)for(let l=e;l>=t;l-=1)a(l,i,s),2*(r+=d)>=n&&(i+=m,r-=n);if(c>n){d=n;let m=e,g=t-e;if(g>0&&(g=1),g<0&&(g=-1),l<o)for(i=l;i<=o;i+=1)a(m,i,s),2*(r+=d)>=c&&(m+=g,r-=c);else if(l>o)for(d=n,i=l;i>=o;i-=1)a(m,i,s),2*(r+=d)>=c&&(m+=g,r-=c)}}(I,B,S,w,n),I=B,S=w)}),s.addEventListener("mousedown",(function(l){const a=o;if("colPicker"===t){const t=Math.ceil((l.pageX-s.offsetLeft)/e),o=Math.ceil((l.pageY-s.offsetTop)/e),c=n.getImageData(t,o,1,1).data,[r,d,i,m]=c;L(0===m?"RGBA(245,245,220,1)":`RGB(${r},${d},${i})`,a)}}));document.getElementById("body").addEventListener("keyup",e=>{"b"===e.key&&g(),"p"===e.key&&f(),"c"===e.key&&u()});document.getElementsByClassName("random-btn")[0].addEventListener("click",()=>{n.clearRect(0,0,s.width,s.height);const e=document.getElementsByClassName("search-input")[0].value;fetch(`https://api.unsplash.com/photos/random?query=town,${e}&client_id=73861cdf71d6b882af3a2077382d2a4c5b54a586b96db6ed530ac9640386e185`).then(e=>e.json()).then(e=>{const t=new Image;t.crossOrigin="Anonymous",t.onload=function(){i(t)},t.src=e.urls.small,localStorage.setItem("canvas",e.urls.small)})});let x;document.getElementsByClassName("wb-btn")[0].addEventListener("click",()=>{if(localStorage.getItem("canvas")){const e=n.getImageData(0,0,s.width,s.height),{data:t}=e;for(let e=0;e<t.length;e+=4){const l=(t[e]+t[e+1]+t[e+2])/3;t[e]=l,t[e+1]=l,t[e+2]=l}n.putImageData(e,0,0)}else window.alert("Please, upload image or draw something!")});document.getElementsByClassName("logout")[0].addEventListener("click",()=>{document.getElementsByClassName("user-data")[0].style.display="none",document.getElementsByClassName("login")[0].style.display="block"});const P=e=>{fetch("https://api.github.com/user",{headers:{Authorization:`token ${e}`}}).then(e=>e.json()).then(e=>{const{login:t}=e;((e,t)=>{document.getElementsByClassName("login")[0].style.display="none";const l=document.getElementsByClassName("user-login")[0],a=document.getElementsByClassName("avatar")[0];l.innerHTML=e,a.style.backgroundImage=`url(${t})`,document.getElementsByClassName("user-data")[0].style.display="flex"})(t,e.avatar_url)})},M=document.getElementById("login"),j=document.getElementById("output");M.addEventListener("click",e=>{e.preventDefault(),new netlify.default({}).authenticate({provider:"github",scope:"user"},(e,t)=>{e?j.innerText=`Error Authenticating with GitHub: ${e}`:x=t.token,P(x)})})})()}]);
//# sourceMappingURL=app.bundle.js.map
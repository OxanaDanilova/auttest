!function(e){var t={};function o(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function l(e,t,o){o.beginPath(),o.fillRect(e,t,1,1),o.fill()}o.r(t);(()=>{let e,t,o,n=1;console.log(n);const s=document.getElementsByClassName("myCanvas")[0],a=s.getContext("2d");console.log("canvas size",s.height,s.width);document.getElementsByClassName("clear")[0].addEventListener("click",()=>{a.clearRect(0,0,s.width,s.height)});const c=document.getElementsByClassName("paint-btn")[0],r=document.getElementsByClassName("pick-btn")[0],d=document.getElementsByClassName("pen-btn")[0];if(localStorage.getItem("mode")){if(e=localStorage.getItem("mode"),localStorage.getItem("selected")){const e=localStorage.getItem("selected");document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),document.getElementsByClassName(e)[0].parentElement.classList.toggle("clicked")}}else e="pen",d.classList.add("clicked");const i=e=>{let t=e.width,o=e.height;const l=t/o;console.log("w",t),console.log("h",o),l>1?(o=(t=s.width)/l,a.drawImage(e,0,(s.height-o)/2,s.width,o)):l<1?(t=l*(o=s.height),a.drawImage(e,(s.width-t)/2,0,t,s.height)):1===l&&a.drawImage(e,0,0,s.width,s.height)},g=()=>{if(localStorage.getItem("canvas")){const e=localStorage.getItem("canvas"),t=new Image;t.crossOrigin="Anonymous",a.imageSmoothingEnabled=!1,t.onload=function(){i(t)},t.src=e,console.log("url",e)}};g();const m=()=>{e="paint",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),c.parentElement.classList.add("clicked"),localStorage.setItem("mode","paint"),localStorage.setItem("selected","paint-btn")},u=t=>{e="colPicker",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),r.parentElement.classList.add("clicked"),t.stopPropagation(),localStorage.setItem("mode","colPicker"),localStorage.setItem("selected","pick-btn")},y=()=>{e="pen",document.getElementsByClassName("clicked")[0].classList.toggle("clicked"),d.parentElement.classList.add("clicked"),localStorage.setItem("mode","pen"),localStorage.setItem("selected","pen-btn")};r.addEventListener("click",u),d.addEventListener("click",y),c.addEventListener("click",m);const p=document.getElementsByClassName("cur-col-btn")[0];localStorage.getItem("currentColor")?(o=localStorage.getItem("currentColor"),p.style.backgroundColor=o):o=getComputedStyle(p).backgroundColor;const f=document.getElementsByClassName("prev-col-btn")[0];p.addEventListener("input",(function(){const e=o;o=this.value,p.style.backgroundColor=o,f.style.backgroundColor=e,t=e,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)})),localStorage.getItem("prevColor")?(t=localStorage.getItem("prevColor"),f.style.backgroundColor=t):t=getComputedStyle(f).backgroundColor;document.getElementsByClassName("red-btn")[0].addEventListener("click",()=>{if("colPicker"===e)return;const l=o;o="#ff0000",p.style.backgroundColor=o,t=l,f.style.backgroundColor=l,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)});document.getElementsByClassName("blue-btn")[0].addEventListener("click",()=>{if("colPicker"===e)return;const l=o;o="#41b6f7",p.style.backgroundColor=o,f.style.backgroundColor=l,t=l,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)});document.addEventListener("click",l=>{if("colPicker"===e&&l.target!==s){const e=o,n=window.getComputedStyle(l.target);o=n.backgroundColor,p.style.backgroundColor=o,f.style.backgroundColor=e,t=e,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)}});const h=document.getElementsByClassName("matrix128")[0],C=document.getElementsByClassName("matrix256")[0],b=document.getElementsByClassName("matrix512")[0],k=e=>{e.target===h&&(n=4,document.getElementsByClassName("selected")[0].classList.toggle("selected"),h.classList.add("selected"),s.height=128,s.width=128,g()),e.target===C&&(n=2,document.getElementsByClassName("selected")[0].classList.toggle("selected"),C.classList.add("selected"),s.height=256,s.width=256,g()),e.target===b&&(n=1,document.getElementsByClassName("selected")[0].classList.toggle("selected"),b.classList.add("selected"),s.height=512,s.width=512,g()),console.log("canvas size",s.height,s.width)};h.addEventListener("click",k),C.addEventListener("click",k),b.addEventListener("click",k);let E,v,I,S,L=!1;s.addEventListener("mousedown",()=>{a.fillStyle=o,"paint"===e&&(L=!0,a.fillRect(0,0,s.width,s.height)),"pen"===e&&(L=!0,E=void 0,v=void 0)}),s.addEventListener("mouseup",(function(){"pen"===e&&(L=!1,E=void 0,I=void 0,v=void 0,S=void 0,localStorage.setItem("canvas",s.toDataURL()))})),s.addEventListener("mousemove",t=>{"pen"===e&&!0===L&&(I=Math.ceil((t.pageX-s.offsetLeft)/n),S=Math.ceil((t.pageY-s.offsetTop)/n),console.log("pixel",I,S),l(I,S,a),E&&v&&function(e,t,o,n,s){const a=Math.abs(t-e),c=Math.abs(n-o);let r=0,d=c/a,i=o,g=n-o;if(g>0&&(g=1),g<0&&(g=-1),e<t)for(let o=e;o<=t;o+=1)l(o,i,s),(r+=d)>=.5&&(i+=g,r-=1);else if(e>t)for(let o=e;o>=t;o-=1)l(o,i,s),(r+=d)>=.5&&(i+=g,r-=1);if(c>a){d=a/c;let g=e,m=t-e;if(m>0&&(m=1),m<0&&(m=-1),o<n)for(i=o;i<=n;i+=1)l(g,i,s),(r+=d)>=.5&&(g+=m,r-=1);else if(o>n)for(i=o;i>=n;i-=1)l(g,i,s),(r+=d)>=.5&&(g+=m,r-=1)}}(E,I,v,S,a),E=I,v=S)}),s.addEventListener("mousedown",(function(l){const c=o;if("colPicker"===e){const e=Math.ceil((l.pageX-s.offsetLeft)/n),r=Math.ceil((l.pageY-s.offsetTop)/n),d=a.getImageData(e,r,1,1).data,i=d[0],g=d[1],m=d[2];0===d[3]?(o="RGBA(245,245,220,1)",p.style.backgroundColor=o,f.style.backgroundColor=c,t=c,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t)):(o=`RGB(${i},${g},${m})`,p.style.backgroundColor=o,f.style.backgroundColor=c,t=c,localStorage.setItem("currentColor",o),localStorage.setItem("prevColor",t))}}));document.getElementById("body").addEventListener("keyup",e=>{"b"===e.key&&m(),"p"===e.key&&y(),"c"===e.key&&u()});document.getElementsByClassName("random-btn")[0].addEventListener("click",()=>{a.clearRect(0,0,s.width,s.height);const e=document.getElementsByClassName("search-input")[0].value;console.log("parametr",e);const t=`https://api.unsplash.com/photos/random?query=town,${e}&client_id=73861cdf71d6b882af3a2077382d2a4c5b54a586b96db6ed530ac9640386e185`;fetch(t).then(e=>e.json()).then(e=>{console.log(e.urls.small),console.log(t);const o=new Image;o.crossOrigin="Anonymous",o.onload=function(){i(o)},o.src=e.urls.small,localStorage.setItem("canvas",e.urls.small),console.log("put in LS",e.urls.small)})});let B;document.getElementsByClassName("wb-btn")[0].addEventListener("click",()=>{const e=a.getImageData(0,0,s.width,s.height),{data:t}=e;for(let e=0;e<t.length;e+=4){const o=(t[e]+t[e+1]+t[e+2])/3;t[e]=o,t[e+1]=o,t[e+2]=o}a.putImageData(e,0,0)});document.getElementsByClassName("logout")[0].addEventListener("click",()=>{document.getElementsByClassName("user-data")[0].style.display="none",document.getElementsByClassName("login")[0].style.display="block"});const N=e=>{fetch("https://api.github.com/user",{headers:{Authorization:`token ${e}`}}).then(e=>e.json()).then(e=>{console.log("Data from github"),console.log(e);const{login:t}=e,o=e.avatar_url;console.log("login",t),console.log("avatar_url",o),((e,t)=>{document.getElementsByClassName("login")[0].style.display="none";const o=document.getElementsByClassName("user-login")[0],l=document.getElementsByClassName("avatar")[0];o.innerHTML=e,l.style.backgroundImage=`url(${t})`,document.getElementsByClassName("user-data")[0].style.display="flex"})(t,o)})},w=document.getElementById("login"),P=document.getElementById("output");w.addEventListener("click",e=>{e.preventDefault(),new netlify.default({}).authenticate({provider:"github",scope:"user"},(e,t)=>{e?P.innerText=`Error Authenticating with GitHub: ${e}`:B=t.token,console.log(t),console.log(B),N(B)})})})()}]);
//# sourceMappingURL=app.bundle.js.map